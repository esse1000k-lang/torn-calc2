# 보안 체크리스트

배포 전·운영 중에 확인하세요.

## 1. 비밀값·데이터 (절대 GitHub에 올리지 않기)

- [ ] `.env` 파일 사용, **Git에 커밋하지 않음** (`.gitignore`에 있음)
- [ ] `data/` 폴더 **전체** Git 제외 (회원, 관리자 PIN, 게시글, 채팅 등)
- [ ] `public/uploads/` Git 제외 (프로필·채팅 이미지)
- [ ] `.env.example`만 레포에 두고, 실제 값은 서버의 `.env`에만 설정

## 2. 프로덕션 환경 변수

- [ ] `NODE_ENV=production` 설정
- [ ] `SESSION_SECRET` **32자 이상** 랜덤 문자열로 설정 (프로덕션에서 미설정 또는 32자 미만이면 서버가 종료됨)
- [ ] `/api/debug/check-admin` 사용 시 `DEBUG_VIEW_KEY` 또는 `SEED_ADMIN_KEY`를 쿼리 `key`로 전달해야 조회 가능 (미설정 시 403)
- [ ] 관리자 지갑은 `ADMIN_WALLET_ADDRESSES` 환경 변수로 설정 (코드에 하드코딩하지 않기)
- [ ] DeepL·Etherscan 등 API 키는 환경 변수로만 사용

## 3. HTTPS·쿠키

- [ ] 실제 도메인에서는 **HTTPS** 사용 (Let's Encrypt 등)
- [ ] 프로덕션에서는 세션 쿠키가 `secure: true`로 설정됨 (HTTPS에서만 전송)

## 4. 서버

- [ ] SSH는 **키 인증** 사용, root 로그인 비활성화 권장
- [ ] 방화벽으로 **80, 443** (또는 필요한 포트)만 개방
- [ ] Node 앱을 **root가 아닌 일반 사용자**로 실행
- [ ] `data/`, `public/uploads/` 디렉터리 권한은 **앱 실행 사용자만** 읽기·쓰기 (예: `chmod 700 data`)
- [ ] 서버 호스트(SSH·원격 데스크톱) 접근은 최소한으로 — `data/` 내 JSON을 수정할 수 있는 주체는 서버를 사실상 제어할 수 있음(사용자·관리자 PIN 등). 배포/운영만 하는 구조 권장.

## 5. 관리자

- [ ] 관리자 PIN **8자리 이상** 권장 (숫자+문자 조합)
- [ ] 관리자 계정·지갑 목록 주기적으로 점검

## 6. 유지보수

- [ ] `npm audit` 주기적으로 실행, 심각한 취약점 수정
- [ ] `data/` 백업은 **암호화**해서 보관

---

설정 예시는 `.env.example`을 참고하세요.
