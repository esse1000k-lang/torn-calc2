# 토네이도 뉴스 중복 제거 로직 설계

## 목표
- **URL이 다른 같은 기사**(다른 소스에서 같은 스토리)를 맥락(제목 유사도)으로 판단해 중복으로 간주하고 제거한다.

## 1. 제목 정규화
- 소문자화, 숫자·한글·영문만 유지, 나머지는 공백으로 치환 후 연속 공백을 하나로, 앞뒤 trim.
- 비교 시 최대 120자만 사용(긴 제목은 앞부분이 핵심).
- `normalizeTitleForDedupe(title)` → 문자열.

## 2. 중복 판정 (두 제목)
- **완전 일치**: 정규화한 문자열이 동일하면 중복.
- **포함 관계**: 짧은 쪽이 긴 쪽에 포함되면 중복 (최소 길이 10자 이상).
- **단어 유사도**: 공백으로 단어 분리 후, 두 집합의 Jaccard 유사도 ≥ 0.6 이면 중복.
- 위 조건 중 하나라도 만족하면 **같은 기사**로 본다.

## 3. 적용 시점
- **수집 시**: 새 기사를 추가하기 전에, 기존 목록에 “제목 유사”인 기사가 있으면 추가하지 않음 (URL 중복 + 제목 중복 모두 검사).
- **일괄 제거**: 관리자 “중복 기사 제거” 실행 시, 전체 목록을 스캔해 유사 제목 그룹을 만들고, 그룹당 1건만 남기고 나머지 삭제 (남기는 건: `createdAt`이 가장 오래된 것).

## 4. 그룹 짓기 (일괄 제거)
- 모든 항목 쌍에 대해 `areTitlesDuplicate(i.title, j.title)` 계산.
- Union-Find(또는 BFS)로 “연결된” 항목들을 하나의 그룹으로 묶음.
- 그룹별로 `createdAt` 기준 가장 오래된 1건만 남기고 나머지 제거 후 저장.

## 5. API·UI
- `POST /api/tornado-news/dedupe` (관리자): 위 일괄 제거 실행, `{ removed: N }` 반환.
- 관리자 페이지 “뉴스 소스 · 수집”에 **중복 기사 제거** 버튼 추가.
