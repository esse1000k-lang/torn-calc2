<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0a0a0b">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>ì¶œì„ì²´í¬ | TornFi</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="manifest" href="/manifest.json">
  <script src="js/pwa-env.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/site.css">
  <link rel="stylesheet" href="css/attendance.css">
</head>
<body>
  <nav class="site-nav">
    <div class="nav-brand">
      <a href="/" class="nav-logo">TornFi</a>
    </div>
    <a href="/admin.html" class="nav-admin-center" id="navAdminCenter" aria-label="ê´€ë¦¬ì" style="display:none;">ğŸ› ï¸</a>
    <div class="nav-menu-wrap">
      <button type="button" class="nav-menu-btn" id="navMenuBtn" aria-label="ë©”ë‰´" aria-expanded="false" aria-haspopup="true">â˜°</button>
      <div class="nav-menu-dropdown" id="navMenuDropdown" role="menu">
        <a href="/login.html" id="navLogin" role="menuitem" style="display:none;">ë¡œê·¸ì¸</a>
        <a href="/register.html" id="navRegister" role="menuitem" style="display:none;">íšŒì›ê°€ì…</a>
        <div class="nav-menu-user" id="navMenuUser" style="display:none;">
          <a href="/profile.html" id="navProfile" role="menuitem">ë‚´ ì •ë³´</a>
          <button type="button" id="navLogout" role="menuitem">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
      </div>
    </div>
  </nav>

  <main class="site-main attendance-page">
    <a href="/" class="attendance-back">â† í™ˆìœ¼ë¡œ</a>

    <section class="attendance-hero">
      <div class="attendance-hero__calendar" aria-hidden="true">
        <span class="attendance-hero__cal-icon">ğŸ“…</span>
        <span class="attendance-hero__today" id="attendanceTodayLabel"></span>
      </div>
      <h1 class="attendance-hero__title">ì˜¤ëŠ˜ë„ ì™€ì¤˜ì„œ ê³ ë§ˆì›Œìš”!</h1>
      <p class="attendance-hero__sub">ì¼ì¼ ì¶œì„í•˜ê³  í•˜íŠ¸ë¥¼ ë°›ì•„ê°€ì„¸ìš”. ì—°ì† ì¶œì„í•˜ë©´ ë³´ë„ˆìŠ¤ê¹Œì§€.</p>
      <div class="attendance-streak" id="attendanceStreakWrap">
        <span class="attendance-streak__fire" aria-hidden="true">ğŸ”¥</span>
        <span class="attendance-streak__label">ì—°ì†</span>
        <span class="attendance-streak__count" id="attendanceStreakCount">0</span>
        <span class="attendance-streak__unit">ì¼</span>
      </div>
    </section>

    <section class="attendance-action">
      <button type="button" class="attendance-btn" id="attendanceBtn" disabled>
        ì˜¤ëŠ˜ ì¶œì„í•˜ê¸°
      </button>
      <p class="attendance-action__hint" id="attendanceHint">ë¡œê·¸ì¸í•˜ë©´ ì¶œì„í•  ìˆ˜ ìˆì–´ìš”.</p>
    </section>

    <section class="attendance-calendar" aria-label="ì¶œì„ ë‹¬ë ¥">
      <h2 class="attendance-calendar__title">ğŸ“† ì¶œì„ ê¸°ë¡</h2>
      <div class="attendance-calendar__nav">
        <button type="button" class="attendance-calendar__prev" id="attendanceCalPrev" aria-label="ì´ì „ ë‹¬">â€¹</button>
        <span class="attendance-calendar__month" id="attendanceCalMonth"></span>
        <button type="button" class="attendance-calendar__next" id="attendanceCalNext" aria-label="ë‹¤ìŒ ë‹¬">â€º</button>
      </div>
      <div class="attendance-calendar__weekdays">
        <span>ì¼</span><span>ì›”</span><span>í™”</span><span>ìˆ˜</span><span>ëª©</span><span>ê¸ˆ</span><span>í† </span>
      </div>
      <div class="attendance-calendar__grid" id="attendanceCalGrid"></div>
      <p class="attendance-calendar__legend"><span class="attendance-calendar__dot"></span> ì¶œì„í•œ ë‚ </p>
    </section>

    <section class="attendance-rewards">
      <h2 class="attendance-rewards__title">â¤ï¸ ì¶œì„ ë³´ìƒ</h2>
      <ul class="attendance-rewards__list">
        <li><strong>ì¼ì¼ ì¶œì„</strong> â†’ í•˜íŠ¸ <strong>1</strong>ê°œ</li>
        <li><strong>7ì¼ ì—°ì†</strong> â†’ <strong>+7</strong>ê°œ</li>
        <li><strong>í•œ ë‹¬ ì—°ì†</strong> â†’ <strong>+30</strong>ê°œ</li>
      </ul>
    </section>

    <section class="attendance-billboard" aria-label="ê¾¸ì¤€íˆ ì¶œì„í•œ ë©¤ë²„">
      <div class="attendance-billboard__sign">
        <span class="attendance-billboard__icon" aria-hidden="true">ğŸ†</span>
        <h2 class="attendance-billboard__title">ë§¤ì¼ ì°¾ì•„ì™€ ì£¼ëŠ” ë¶„ë“¤</h2>
        <p class="attendance-billboard__desc">ê¾¸ì¤€íˆ ì¶œì„í•˜ê³  ìˆì–´ìš”. ì˜¤ëŠ˜ë„ ìˆ˜ê³  ë§ìœ¼ì…¨ì–´ìš”!</p>
      </div>
      <ul class="attendance-billboard__list" id="attendanceLeaderboard">
        <li class="attendance-billboard__empty" id="attendanceLeaderboardEmpty">ì•„ì§ ì—°ì† ì¶œì„ ê¸°ë¡ì´ ì—†ì–´ìš”. ì²« ì£¼ì¸ê³µì´ ë˜ì–´ ë³´ì„¸ìš”!</li>
      </ul>
    </section>
  </main>

  <script src="js/auth.js"></script>
  <script src="js/nav-logo.js"></script>
  <script>
    (function () {
      var navLogin = document.getElementById('navLogin');
      var navRegister = document.getElementById('navRegister');
      var navProfile = document.getElementById('navProfile');
      var navMenuUser = document.getElementById('navMenuUser');
      var navAdminCenter = document.getElementById('navAdminCenter');
      function updateNav(user) {
        if (user) {
          if (navLogin) navLogin.style.display = 'none';
          if (navRegister) navRegister.style.display = 'none';
          if (navMenuUser) navMenuUser.style.display = 'block';
          if (navProfile) navProfile.style.display = 'block';
          if (navAdminCenter) navAdminCenter.style.display = user.isAdmin ? 'inline-flex' : 'none';
        } else {
          if (navLogin) navLogin.style.display = 'block';
          if (navRegister) navRegister.style.display = 'block';
          if (navMenuUser) navMenuUser.style.display = 'none';
          if (navProfile) navProfile.style.display = 'none';
          if (navAdminCenter) navAdminCenter.style.display = 'none';
        }
      }
      if (window.TornFiAuth && window.TornFiAuth.onUser) window.TornFiAuth.onUser(updateNav);
      var navMenuBtn = document.getElementById('navMenuBtn');
      var navMenuDropdown = document.getElementById('navMenuDropdown');
      if (navMenuBtn && navMenuDropdown) {
        navMenuBtn.addEventListener('click', function (e) { e.stopPropagation(); navMenuDropdown.classList.toggle('is-open'); navMenuBtn.setAttribute('aria-expanded', navMenuDropdown.classList.contains('is-open')); });
        navMenuDropdown.addEventListener('click', function (e) { e.stopPropagation(); });
        document.addEventListener('click', function () { navMenuDropdown.classList.remove('is-open'); navMenuBtn.setAttribute('aria-expanded', 'false'); });
      }
      var navLogout = document.getElementById('navLogout');
      if (navLogout) navLogout.addEventListener('click', function (e) { e.preventDefault(); if (!confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return; window.TornFiAuth.logout().then(function () { updateNav(null); window.location.href = '/'; }); });
    })();
  </script>
  <script src="js/attendance.js"></script>
</body>
</html>
